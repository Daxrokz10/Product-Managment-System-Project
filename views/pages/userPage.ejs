<%- include('../partials/header.ejs') %>

<div class="main-panel vh-100 w-100">
  <div class="content-wrapper py-5">
    <div class="container-fluid">
      <div class="row g-4">
        <% products.forEach(product => { %>
          <div class="col-12 col-sm-6 col-md-4 col-lg-3 d-flex">
            <div class="card flex-fill h-100 shadow-sm <%= product.stock === 0 ? 'opacity-50' : '' %>">
              <img 
                src="<%= product.image %>" 
                class="card-img-top"
                alt="<%= product.name %>"
                style="height: 220px; object-fit: cover;"
              >
              <div class="card-body d-flex flex-column justify-content-between">
                <div>
                  <h5 class="card-title"><%= product.name %></h5>
                  <p class="card-text mb-1">Price: $<%= product.price %></p>
                  <p class="card-text mb-1">Category: <%= product.category %></p>
                  <p class="card-text mb-2">Stock: <%= product.stock %></p>
                </div>
                <div>
                  <% if (product.stock < 15 && product.stock > 0) { %>
                    <span class="badge bg-warning text-dark">Stock Low</span>
                  <% } %>
                  <% if (product.stock === 0) { %>
                    <span class="badge bg-danger">Out of Stock</span>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
        <% }); %>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer.ejs') %>
